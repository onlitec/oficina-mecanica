<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Estabilidade do Menu</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="stylesheet" href="/styles/menu-unified.css">
    <style>
        .test-container {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-section {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .test-result {
            padding: 1rem;
            border-radius: 4px;
            margin: 0.5rem 0;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .test-pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .test-fail {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .test-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .monitor-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            margin: 0.5rem;
            font-size: 1rem;
        }
        
        .monitor-button:hover {
            background: #0056b3;
        }
        
        .monitor-button.active {
            background: #28a745;
        }
        
        .monitor-button.stop {
            background: #dc3545;
        }
        
        #monitorResults {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            padding: 1rem;
            background: #f8f9fa;
            font-family: monospace;
            font-size: 0.85rem;
        }
    </style>
</head>
<body class="dashboard-layout">
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="/" class="logo">
                <span class="logo-icon">üîß</span>
                <span class="logo-text">Oficina Mec√¢nica</span>
            </a>
            
            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="/dashboard.html" class="nav-link">
                            <span>üìä</span>
                            Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/customers.html" class="nav-link">
                            <span>üë•</span>
                            Clientes
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/service-orders.html" class="nav-link">
                            <span>üîß</span>
                            Ordens
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/parts.html" class="nav-link">
                            <span>‚öôÔ∏è</span>
                            Pe√ßas
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/financial.html" class="nav-link">
                            <span>üí∞</span>
                            Financeiro
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/reports.html" class="nav-link">
                            <span>üìà</span>
                            Relat√≥rios
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/settings.html" class="nav-link active">
                            <span>‚öôÔ∏è</span>
                            Configura√ß√µes
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="user-menu">
                <div class="user-info">
                    <div class="user-avatar">T</div>
                    <span>Teste</span>
                    <span>‚ñº</span>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="test-container">
            <h1>üß™ Teste de Estabilidade do Menu</h1>
            <p>Esta p√°gina testa se o menu est√° completamente est√°tico e sem movimentos indesejados.</p>

            <!-- Testes Autom√°ticos -->
            <div class="test-section">
                <h2>üîç Testes Autom√°ticos</h2>
                <button class="monitor-button" onclick="runAutomaticTests()">Executar Testes</button>
                <div id="automaticTestResults"></div>
            </div>

            <!-- Monitor em Tempo Real -->
            <div class="test-section">
                <h2>üìä Monitor em Tempo Real</h2>
                <button class="monitor-button" id="startMonitor" onclick="startMonitoring()">Iniciar Monitoramento</button>
                <button class="monitor-button stop" id="stopMonitor" onclick="stopMonitoring()" style="display: none;">Parar Monitoramento</button>
                <div id="monitorResults"></div>
            </div>

            <!-- Instru√ß√µes de Teste Manual -->
            <div class="test-section">
                <h2>‚úã Teste Manual</h2>
                <ol>
                    <li>Passe o mouse sobre cada item do menu</li>
                    <li>Clique em cada item do menu</li>
                    <li>Observe se h√° qualquer movimento, tremula√ß√£o ou mudan√ßa de tamanho</li>
                    <li>Verifique se o logo e t√≠tulo permanecem est√°ticos</li>
                    <li>Teste em diferentes tamanhos de tela (redimensione a janela)</li>
                </ol>
                <div class="test-info">
                    <strong>Resultado Esperado:</strong> O menu deve permanecer completamente est√°tico, sem qualquer movimento, mudan√ßa de posi√ß√£o ou tamanho dos elementos.
                </div>
            </div>
        </div>
    </main>

    <script>
        let monitoringInterval;
        let initialPositions = {};

        // Executar testes autom√°ticos
        function runAutomaticTests() {
            const resultsDiv = document.getElementById('automaticTestResults');
            resultsDiv.innerHTML = '<div class="test-info">Executando testes...</div>';
            
            setTimeout(() => {
                const results = [];
                
                // Teste 1: Verificar se elementos t√™m transform
                const navLinks = document.querySelectorAll('.nav-link');
                let hasTransform = false;
                navLinks.forEach(link => {
                    const style = window.getComputedStyle(link);
                    if (style.transform !== 'none') {
                        hasTransform = true;
                    }
                });
                
                results.push({
                    test: 'Transform CSS',
                    pass: !hasTransform,
                    message: hasTransform ? 'FALHA: Elementos t√™m transform aplicado' : 'SUCESSO: Nenhum transform detectado'
                });
                
                // Teste 2: Verificar se elementos t√™m transition
                let hasTransition = false;
                navLinks.forEach(link => {
                    const style = window.getComputedStyle(link);
                    if (style.transition !== 'all 0s ease 0s' && style.transition !== 'none') {
                        hasTransition = true;
                    }
                });
                
                results.push({
                    test: 'Transition CSS',
                    pass: !hasTransition,
                    message: hasTransition ? 'FALHA: Elementos t√™m transition aplicado' : 'SUCESSO: Nenhuma transition detectada'
                });
                
                // Teste 3: Verificar posicionamento
                let hasAbsolutePosition = false;
                navLinks.forEach(link => {
                    const style = window.getComputedStyle(link);
                    if (style.position !== 'static') {
                        hasAbsolutePosition = true;
                    }
                });
                
                results.push({
                    test: 'Posicionamento CSS',
                    pass: !hasAbsolutePosition,
                    message: hasAbsolutePosition ? 'FALHA: Elementos n√£o est√£o com position static' : 'SUCESSO: Todos elementos com position static'
                });
                
                // Exibir resultados
                let html = '';
                results.forEach(result => {
                    const className = result.pass ? 'test-pass' : 'test-fail';
                    html += `<div class="${className}">
                        <strong>${result.test}:</strong> ${result.message}
                    </div>`;
                });
                
                resultsDiv.innerHTML = html;
            }, 500);
        }

        // Iniciar monitoramento
        function startMonitoring() {
            const startBtn = document.getElementById('startMonitor');
            const stopBtn = document.getElementById('stopMonitor');
            const resultsDiv = document.getElementById('monitorResults');
            
            startBtn.style.display = 'none';
            stopBtn.style.display = 'inline-block';
            
            // Capturar posi√ß√µes iniciais
            captureInitialPositions();
            
            resultsDiv.innerHTML = '<div class="test-info">Monitoramento iniciado... Passe o mouse sobre os itens do menu.</div>';
            
            monitoringInterval = setInterval(() => {
                checkForMovement();
            }, 100);
        }

        // Parar monitoramento
        function stopMonitoring() {
            const startBtn = document.getElementById('startMonitor');
            const stopBtn = document.getElementById('stopMonitor');
            
            startBtn.style.display = 'inline-block';
            stopBtn.style.display = 'none';
            
            clearInterval(monitoringInterval);
            
            const resultsDiv = document.getElementById('monitorResults');
            resultsDiv.innerHTML += '<div class="test-info">Monitoramento parado.</div>';
        }

        // Capturar posi√ß√µes iniciais
        function captureInitialPositions() {
            const elements = document.querySelectorAll('.nav-link, .logo, .logo-icon, .logo-text');
            elements.forEach((element, index) => {
                const rect = element.getBoundingClientRect();
                initialPositions[index] = {
                    element: element,
                    x: rect.x,
                    y: rect.y,
                    width: rect.width,
                    height: rect.height
                };
            });
        }

        // Verificar movimento
        function checkForMovement() {
            const resultsDiv = document.getElementById('monitorResults');
            let movementDetected = false;
            
            Object.keys(initialPositions).forEach(key => {
                const initial = initialPositions[key];
                const rect = initial.element.getBoundingClientRect();
                
                const deltaX = Math.abs(rect.x - initial.x);
                const deltaY = Math.abs(rect.y - initial.y);
                const deltaW = Math.abs(rect.width - initial.width);
                const deltaH = Math.abs(rect.height - initial.height);
                
                if (deltaX > 0.5 || deltaY > 0.5 || deltaW > 0.5 || deltaH > 0.5) {
                    movementDetected = true;
                    const timestamp = new Date().toLocaleTimeString();
                    const elementName = initial.element.className || initial.element.tagName;
                    
                    resultsDiv.innerHTML += `<div class="test-fail">
                        [${timestamp}] MOVIMENTO DETECTADO em ${elementName}:<br>
                        ŒîX: ${deltaX.toFixed(2)}px, ŒîY: ${deltaY.toFixed(2)}px, 
                        ŒîW: ${deltaW.toFixed(2)}px, ŒîH: ${deltaH.toFixed(2)}px
                    </div>`;
                    
                    // Atualizar posi√ß√£o para pr√≥xima verifica√ß√£o
                    initialPositions[key] = {
                        element: initial.element,
                        x: rect.x,
                        y: rect.y,
                        width: rect.width,
                        height: rect.height
                    };
                    
                    resultsDiv.scrollTop = resultsDiv.scrollHeight;
                }
            });
        }

        // Executar teste inicial ao carregar
        window.addEventListener('load', () => {
            setTimeout(runAutomaticTests, 1000);
        });
    </script>
    <script src="js/logo-immutable.js"></script>
</body>
</html>
